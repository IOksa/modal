function e(e,o,t,n){Object.defineProperty(e,o,{get:t,set:n,enumerable:!0,configurable:!0})}function o(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var o=r[e];delete r[e];var t={id:e,exports:{}};return n[e]=t,o.call(t.exports,t,t.exports),t.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,o){r[e]=o},t.parcelRequired7c6=i),i.register("kyEFX",(function(o,t){var n,r;e(o.exports,"register",(function(){return n}),(function(e){return n=e})),e(o.exports,"resolve",(function(){return r}),(function(e){return r=e}));var i={};n=function(e){for(var o=Object.keys(e),t=0;t<o.length;t++)i[o[t]]=e[o[t]]},r=function(e){var o=i[e];if(null==o)throw new Error("Could not resolve bundle with id "+e);return o}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.964ae052.js","aMVCO":"amazon.1427c9fc.jpg","dSznB":"bookshop.0e4aa455.jpg","b2DY9":"image1.c5cbee86.jpg"}'));var s={fetchTopBooks:async function(){return await fetch("https://books-backend.p.goit.global/books/top-books").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}};var a,l={fetchBookById:async function(e){return await fetch(`https://books-backend.p.goit.global/books//${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}};a=new URL(i("kyEFX").resolve("aMVCO"),import.meta.url).toString();var c;c=new URL(i("kyEFX").resolve("dSznB"),import.meta.url).toString();var d;d=new URL(i("kyEFX").resolve("b2DY9"),import.meta.url).toString();const u={ul:document.querySelector(".js-books-list"),closeModalBtn:document.querySelector('[data-action="close-modal"]'),backdrop:document.querySelector(".js-backdrop"),bookCard:document.querySelector(".js-book-card"),shoppingListBtn:document.querySelector('[data-action="shopping-list-modal"]'),text:document.querySelector(".js-modal-text")};let p=0;const g=localStorage.getItem("bookId");console.log("savedData=",g);let h=JSON.parse(g)||[];function f(){window.removeEventListener("keydown",b),document.body.classList.remove("show-modal")}function b(e){"Escape"===e.code&&f()}function k(e){const{book_image:t,author:n,title:r,description:i,buy_links:s,_id:l}=e,p=`<div class="img-thumb"><img class="book-image"" src="${t}" alt="${r}" loading="lazy" data-source="${l}"/>\n    </div>\n    <div class="book-description-thumb">\n    <p class="book-title">${r}</p>\n    <p class="book-author">${n}</p>\n    <p class="book-description">${i}</p>\n    <div class="book-links">\n    <a href="${s[0].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${o(a)}" width="62px" height="19px"/>\n    </a>\n    <a href="${s[1].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${o(d)}" width="33px" height="32px"/>\n    </a>\n    <a href="${s[4].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${o(c)}" width="38px" height="36px"/>\n    </a>\n    </div>\n    </div>`;u.bookCard.innerHTML=p}console.log("arrShoppingList= ",h),u.ul.addEventListener("click",(function(e){e.preventDefault();if(!e.target.classList.contains("gallery__image"))return;console.log(e.target.dataset.source),p=e.target.dataset.source;const o=null!==h&&h.includes(p);console.log("isBookInShoppingList=",o),o?(u.shoppingListBtn.textContent="remove from the shopping list",u.shoppingListBtn.classList.add("modal__button-shopping-list--remove"),u.text.classList.remove("visually-hidden")):(u.shoppingListBtn.textContent="add to shopping list",u.text.classList.add("visually-hidden"),u.shoppingListBtn.classList.remove("modal__button-shopping-list--remove"));u.bookCard.innerHTML="",l.fetchBookById(p).then(k),window.addEventListener("keydown",b),document.body.classList.add("show-modal")})),u.closeModalBtn.addEventListener("click",f),u.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&f()})),u.shoppingListBtn.addEventListener("click",(function(e){const o=h.indexOf(p);-1!==o?(h.splice(o,1),localStorage.removeItem("bookId"),localStorage.setItem("bookId",JSON.stringify(h))):(h.push(p),localStorage.setItem("bookId",JSON.stringify(h)));f()})),s.fetchTopBooks().then((function(e){const o=e[0].books.map((({_id:e,book_image:o,book_image_width:t,book_image_height:n})=>`<li ><div class="thumb"><img class="gallery__image" src="${o}" alt="" width="${t}px" height="${n}px" data-source="${e}"/><div></li>`)).join("");u.ul.innerHTML=o}));
//# sourceMappingURL=index.964ae052.js.map
