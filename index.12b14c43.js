function o(o,e,t,n){Object.defineProperty(o,e,{get:t,set:n,enumerable:!0,configurable:!0})}function e(o){return o&&o.__esModule?o.default:o}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=t.parcelRequired7c6;null==r&&((r=function(o){if(o in n)return n[o].exports;if(o in i){var e=i[o];delete i[o];var t={id:o,exports:{}};return n[o]=t,e.call(t.exports,t,t.exports),t.exports}var r=new Error("Cannot find module '"+o+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(o,e){i[o]=e},t.parcelRequired7c6=r),r.register("kyEFX",(function(e,t){var n,i;o(e.exports,"register",(function(){return n}),(function(o){return n=o})),o(e.exports,"resolve",(function(){return i}),(function(o){return i=o}));var r={};n=function(o){for(var e=Object.keys(o),t=0;t<e.length;t++)r[e[t]]=o[e[t]]},i=function(o){var e=r[o];if(null==e)throw new Error("Could not resolve bundle with id "+o);return e}})),r("kyEFX").register(JSON.parse('{"5ZPII":"index.12b14c43.js","aMVCO":"amazon.1427c9fc.jpg","dSznB":"bookshop.0e4aa455.jpg","b2DY9":"image1.c5cbee86.jpg"}'));var s={fetchTopBooks:async function(){return await fetch("https://books-backend.p.goit.global/books/top-books").then((o=>{if(!o.ok)throw new Error(o.statusText);return o.json()}))}};var a={fetchBookById:async function(o){return await fetch(`https://books-backend.p.goit.global/books//${o}`).then((o=>{if(!o.ok)throw new Error(o.statusText);return o.json()}))}};var l;l=new URL(r("kyEFX").resolve("aMVCO"),import.meta.url).toString();var c;c=new URL(r("kyEFX").resolve("dSznB"),import.meta.url).toString();var d;d=new URL(r("kyEFX").resolve("b2DY9"),import.meta.url).toString();const p={ul:document.querySelector(".js-books-list"),closeModalBtn:document.querySelector('[data-action="close-modal"]'),backdrop:document.querySelector(".js-backdrop"),bookCard:document.querySelector(".js-book-card"),shoppingListBtn:document.querySelector('[data-action="shopping-list-modal"]')};let g={};const u=localStorage.getItem("info-shopping-list");let h=JSON.parse(u)||[];function k(){window.removeEventListener("keydown",b),document.body.classList.remove("show-modal")}function b(o){"Escape"===o.code&&k()}function f(o){const{book_image:t,author:n,title:i,description:r,buy_links:s,_id:a,list_name:u}=o;g.bookId=a,g.bookAuthor=n,g.bookTitle=i,g.bookDescription=r,g.bookCategory=u,g.bookImage=t,g.bookAmazon=s[0].url,g.bookOpenBook=s[1].url,g.bookShop=s[4].url,console.log("currentBookInfo",g);const h=`<div class="img-thumb"><img class="book-image"" src="${t}" alt="${i}" loading="lazy" data-source="${a}"/>\n    </div>\n    <div class="book-description-thumb">\n    <p class="book-title">${i}</p>\n    <p class="book-author">${n}</p>\n    <p class="book-description">${r}</p>\n    <div class="book-links">\n    <a href="${s[0].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${e(l)}" width="62px" height="19px"/>\n    </a>\n    <a href="${s[1].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${e(d)}" width="33px" height="32px"/>\n    </a>\n    <a href="${s[4].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${e(c)}" width="38px" height="36px"/>\n    </a>\n    </div>\n    </div>`;p.bookCard.innerHTML=h}console.log("arrShoppingList= ",h),p.ul.addEventListener("click",(function(o){o.preventDefault();if(!o.target.classList.contains("js-gallery-image"))return;idBook=o.target.dataset.id;0!==h.length&&h.find((o=>o.bookId===idBook))?(p.shoppingListBtn.textContent="remove from the shopping list",p.shoppingListBtn.classList.add("modal__button-shopping-list--remove")):(p.shoppingListBtn.textContent="add to shopping list",p.shoppingListBtn.classList.remove("modal__button-shopping-list--remove"));p.bookCard.innerHTML="",a.fetchBookById(idBook).then(f),window.addEventListener("keydown",b),document.body.classList.add("show-modal")})),p.closeModalBtn.addEventListener("click",k),p.backdrop.addEventListener("click",(function(o){o.currentTarget===o.target&&k()})),p.shoppingListBtn.addEventListener("click",(function(o){console.log("onShoppingListBtnClick arrShoppingList=",h),console.log("onShoppingListBtnClick currentBookInfo=",g.bookAuthor);const e=h.findIndex((o=>o.bookId===g.bookId));console.log("onShoppingListBtnClick indexBook=",e),-1!==e?(h.splice(e,1),console.log("onShoppingListBtnClick  remove arrShoppingList=",h),localStorage.removeItem("info-shopping-list"),localStorage.setItem("info-shopping-list",JSON.stringify(h))):(h.push({...g}),console.log("onShoppingListBtnClick add arrShoppingList=",h),localStorage.setItem("info-shopping-list",JSON.stringify(h)));k()})),s.fetchTopBooks().then((function(o){const e=o[0].books.map((({_id:o,book_image:e,book_image_width:t,book_image_height:n})=>`<li ><div class="thumb"><img class="js-gallery-image" src="${e}" alt="" width="${t}px" height="${n}px" data-id="${o}"/><div></li>`)).join("");p.ul.innerHTML=e}));
//# sourceMappingURL=index.12b14c43.js.map
