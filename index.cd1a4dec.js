function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=o.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},o.parcelRequired7c6=i),i.register("kyEFX",(function(t,o){var n,r;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var i={};n=function(e){for(var t=Object.keys(e),o=0;o<t.length;o++)i[t[o]]=e[t[o]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"5ZPII":"index.cd1a4dec.js","aMVCO":"amazon.1427c9fc.jpg","dSznB":"bookshop.0e4aa455.jpg","b2DY9":"image1.c5cbee86.jpg"}'));var s={fetchTopBooks:async function(){return await fetch("https://books-backend.p.goit.global/books/top-books").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}};var a,l={fetchBookById:async function(e){return await fetch(`https://books-backend.p.goit.global/books//${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}};a=new URL(i("kyEFX").resolve("aMVCO"),import.meta.url).toString();var d;d=new URL(i("kyEFX").resolve("dSznB"),import.meta.url).toString();var c;c=new URL(i("kyEFX").resolve("b2DY9"),import.meta.url).toString();const u={ul:document.querySelector(".js-books-list"),closeModalBtn:document.querySelector('[data-action="close-modal"]'),backdrop:document.querySelector(".js-backdrop"),bookCard:document.querySelector(".js-book-card"),shoppingListBtn:document.querySelector('[data-action="shopping-list-modal"]'),text:document.querySelector(".js-modal-text")};let p=0;const g=localStorage.getItem("bookId");console.log("savedData=",g);let h=JSON.parse(g)||[];function f(){window.removeEventListener("keydown",b),document.body.classList.remove("show-modal")}function b(e){"Escape"===e.code&&f()}function k(e){const{book_image:o,author:n,title:r,description:i,buy_links:s,_id:l}=e,p=`<div class="img-thumb"><img class="book-image"" src="${o}" alt="${r}" loading="lazy" data-source="${l}"/>\n    </div>\n    <div class="book-description-thumb">\n    <p class="book-title">${r}</p>\n    <p class="book-author">${n}</p>\n    <p class="book-description">${i}</p>\n    <div class="book-links">\n    <a href="${s[0].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${t(a)}" width="62px" height="19px"/>\n    </a>\n    <a href="${s[1].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${t(c)}" width="33px" height="32px"/>\n    </a>\n    <a href="${s[4].url}" target="_blank" rel="noreferrer noopener">\n    <img src="${t(d)}" width="38px" height="36px"/>\n    </a>\n    </div>\n    </div>`;u.bookCard.innerHTML=p}console.log("arrShoppingList= ",h),u.ul.addEventListener("click",(function(e){e.preventDefault();if(!e.target.classList.contains("js-gallery-image"))return;console.log(e.target.dataset.id),p=e.target.dataset.id;const t=null!==h&&h.includes(p);console.log("isBookInShoppingList=",t),t?(u.shoppingListBtn.textContent="remove from the shopping list",u.shoppingListBtn.classList.add("modal__button-shopping-list--remove"),u.text.classList.remove("visually-hidden")):(u.shoppingListBtn.textContent="add to shopping list",u.text.classList.add("visually-hidden"),u.shoppingListBtn.classList.remove("modal__button-shopping-list--remove"));u.bookCard.innerHTML="",l.fetchBookById(p).then(k),window.addEventListener("keydown",b),document.body.classList.add("show-modal")})),u.closeModalBtn.addEventListener("click",f),u.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&f()})),u.shoppingListBtn.addEventListener("click",(function(e){const t=h.indexOf(p);-1!==t?(h.splice(t,1),localStorage.removeItem("bookId"),localStorage.setItem("bookId",JSON.stringify(h))):(h.push(p),localStorage.setItem("bookId",JSON.stringify(h)));f()})),s.fetchTopBooks().then((function(e){const t=e[0].books.map((({_id:e,book_image:t,book_image_width:o,book_image_height:n})=>`<li ><div class="thumb"><img class="js-gallery-image" src="${t}" alt="" width="${o}px" height="${n}px" data-id="${e}"/><div></li>`)).join("");u.ul.innerHTML=t}));
//# sourceMappingURL=index.cd1a4dec.js.map
